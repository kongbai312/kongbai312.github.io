import{ac as Y,H as G,W as S,k as b,I as W,aU as Z,av as J,d as z,M as y,w as F,s as T,q as R,A as Q,T as X,E as w,ae as ee,N as M,af as x,D as B,V as q,a1 as te,aV as oe,$ as ne,j as $,o as le,a as C,c as L,e as _,b as O,h as se,O as ae,a0 as re,z as ie}from"./index-036cbdfa.js";import{E as ce}from"./el-card-25e96b3e.js";import{_ as ue}from"./pr_headerImg-3b8fe78f.js";import{j as de}from"./index-94c6c0b9.js";import{a as fe}from"./use-global-config-7025c62f.js";import{a as ve,b as me}from"./scroll-b3fb994a.js";import{t as H}from"./throttle-bde9afc3.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-d7284e94.js";import"./isObject-5520b7e1.js";import"./index-58acc345.js";const g="ElInfiniteScroll",be=50,pe=200,_e=0,he={delay:{type:Number,default:pe},distance:{type:Number,default:_e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},V=(e,t)=>Object.entries(he).reduce((o,[n,a])=>{var s,r;const{type:u,default:d}=a,i=e.getAttribute(`infinite-scroll-${n}`);let c=(r=(s=t[i])!=null?s:i)!=null?r:d;return c=c==="false"?!1:c,c=u(c),o[n]=Number.isNaN(c)?d:c,o},{}),U=e=>{const{observer:t}=e[g];t&&(t.disconnect(),delete e[g].observer)},ye=(e,t)=>{const{container:o,containerEl:n,instance:a,observer:s,lastScrollTop:r}=e[g],{disabled:u,distance:d}=V(e,a),{clientHeight:i,scrollHeight:c,scrollTop:v}=n,l=v-r;if(e[g].lastScrollTop=v,s||u||l<0)return;let f=!1;if(o===e)f=c-(i+v)<=d;else{const{clientTop:m,scrollHeight:h}=e,p=me(e,n);f=v+i>=p+m+h-d}f&&t.call(a)};function k(e,t){const{containerEl:o,instance:n}=e[g],{disabled:a}=V(e,n);a||o.clientHeight===0||(o.scrollHeight<=o.clientHeight?t.call(n):U(e))}const xe={async mounted(e,t){const{instance:o,value:n}=t;Y(n)||G(g,"'v-infinite-scroll' binding value must be a function"),await S();const{delay:a,immediate:s}=V(e,o),r=ve(e,!0),u=r===window?document.documentElement:r,d=H(ye.bind(null,e,n),a);if(r){if(e[g]={instance:o,container:r,containerEl:u,delay:a,cb:n,onScroll:d,lastScrollTop:u.scrollTop},s){const i=new MutationObserver(H(k.bind(null,e,n),be));e[g].observer=i,i.observe(e,{childList:!0,subtree:!0}),k(e,n)}r.addEventListener("scroll",d)}},unmounted(e){const{container:t,onScroll:o}=e[g];t==null||t.removeEventListener("scroll",o),U(e)},async updated(e){if(!e[g])await S();else{const{containerEl:t,cb:o,observer:n}=e[g];t.clientHeight&&n&&k(e,o)}}},N=xe;N.install=e=>{e.directive("InfiniteScroll",N)};const Ce=N;function Le(e){let t;const o=b(!1),n=W({...e,originalPosition:"",originalOverflow:"",visible:!1});function a(l){n.text=l}function s(){const l=n.parent,f=v.ns;if(!l.vLoadingAddClassList){let m=l.getAttribute("loading-number");m=Number.parseInt(m)-1,m?l.setAttribute("loading-number",m.toString()):(w(l,f.bm("parent","relative")),l.removeAttribute("loading-number")),w(l,f.bm("parent","hidden"))}r(),c.unmount()}function r(){var l,f;(f=(l=v.$el)==null?void 0:l.parentNode)==null||f.removeChild(v.$el)}function u(){var l;e.beforeClose&&!e.beforeClose()||(o.value=!0,clearTimeout(t),t=window.setTimeout(d,400),n.visible=!1,(l=e.closed)==null||l.call(e))}function d(){if(!o.value)return;const l=n.parent;o.value=!1,l.vLoadingAddClassList=void 0,s()}const i=z({name:"ElLoading",setup(l,{expose:f}){const{ns:m,zIndex:h}=fe("loading");return f({ns:m,zIndex:h}),()=>{const p=n.spinner||n.svg,A=y("svg",{class:"circular",viewBox:n.svgViewBox?n.svgViewBox:"0 0 50 50",...p?{innerHTML:p}:{}},[y("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),I=n.text?y("p",{class:m.b("text")},[n.text]):void 0;return y(X,{name:m.b("fade"),onAfterLeave:d},{default:F(()=>[T(R("div",{style:{backgroundColor:n.background||""},class:[m.b("mask"),n.customClass,n.fullscreen?"is-fullscreen":""]},[y("div",{class:m.b("spinner")},[A,I])]),[[Q,n.visible]])])})}}}),c=Z(i),v=c.mount(document.createElement("div"));return{...J(n),setText:a,removeElLoadingChild:r,close:u,handleAfterLeave:d,vm:v,get $el(){return v.$el}}}let E;const Ee=function(e={}){if(!ee)return;const t=Se(e);if(t.fullscreen&&E)return E;const o=Le({...t,closed:()=>{var a;(a=t.closed)==null||a.call(t),t.fullscreen&&(E=void 0)}});we(t,t.parent,o),D(t,t.parent,o),t.parent.vLoadingAddClassList=()=>D(t,t.parent,o);let n=t.parent.getAttribute("loading-number");return n?n=`${Number.parseInt(n)+1}`:n="1",t.parent.setAttribute("loading-number",n),t.parent.appendChild(o.$el),S(()=>o.visible.value=t.visible),t.fullscreen&&(E=o),o},Se=e=>{var t,o,n,a;let s;return M(e.target)?s=(t=document.querySelector(e.target))!=null?t:document.body:s=e.target||document.body,{parent:s===document.body||e.body?document.body:s,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:s===document.body&&((o=e.fullscreen)!=null?o:!0),lock:(n=e.lock)!=null?n:!1,customClass:e.customClass||"",visible:(a=e.visible)!=null?a:!0,target:s}},we=async(e,t,o)=>{const{nextZIndex:n}=o.vm.zIndex||o.vm._.exposed.zIndex,a={};if(e.fullscreen)o.originalPosition.value=x(document.body,"position"),o.originalOverflow.value=x(document.body,"overflow"),a.zIndex=n();else if(e.parent===document.body){o.originalPosition.value=x(document.body,"position"),await S();for(const s of["top","left"]){const r=s==="top"?"scrollTop":"scrollLeft";a[s]=`${e.target.getBoundingClientRect()[s]+document.body[r]+document.documentElement[r]-Number.parseInt(x(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])a[s]=`${e.target.getBoundingClientRect()[s]}px`}else o.originalPosition.value=x(t,"position");for(const[s,r]of Object.entries(a))o.$el.style[s]=r},D=(e,t,o)=>{const n=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?w(t,n.bm("parent","relative")):B(t,n.bm("parent","relative")),e.fullscreen&&e.lock?B(t,n.bm("parent","hidden")):w(t,n.bm("parent","hidden"))},P=Symbol("ElLoading"),j=(e,t)=>{var o,n,a,s;const r=t.instance,u=l=>q(t.value)?t.value[l]:void 0,d=l=>{const f=M(l)&&(r==null?void 0:r[l])||l;return f&&b(f)},i=l=>d(u(l)||e.getAttribute(`element-loading-${oe(l)}`)),c=(o=u("fullscreen"))!=null?o:t.modifiers.fullscreen,v={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:c,target:(n=u("target"))!=null?n:c?void 0:e,body:(a=u("body"))!=null?a:t.modifiers.body,lock:(s=u("lock"))!=null?s:t.modifiers.lock};e[P]={options:v,instance:Ee(v)}},Ae=(e,t)=>{for(const o of Object.keys(t))te(t[o])&&(t[o].value=e[o])},Ie={mounted(e,t){t.value&&j(e,t)},updated(e,t){const o=e[P];t.oldValue!==t.value&&(t.value&&!t.oldValue?j(e,t):t.value&&t.oldValue?q(t.value)&&Ae(t.value,o.options):o==null||o.instance.close())},unmounted(e){var t;(t=e[P])==null||t.instance.close()}};const ke={class:"albumPhoto_container"},Te={class:"albumPhoto_content"},Ne=["src"],Pe={"element-loading-text":"Loading..."},Ve={key:0,class:"finished"},Be=z({__name:"albumPhoto",setup(e){let t="https://pic.imgdb.cn/item/64c607331ddac507cc49cc9d.jpg";const o=ne(),n=$(()=>Number(o.params.id)),a=$(()=>{let l=o.query.title;return o.meta.title=l,document.title=`Swhite's小窝-${l}`,l.split("")});let s=b([]),r=b({page:1,pageSize:10}),u=b();const d=async()=>{let l=await de({...r.value,id:n.value});s.value.push(...l.data.pageData),u.value=l.data.totalPage};le(()=>{d()});let i=b(!1),c=b(!1);const v=()=>{i.value=!0,r.value.page<u.value?(r.value.page++,d()):r.value.page>=u.value&&(c.value=!0),i.value=!1};return(l,f)=>{const m=ue,h=ce,p=Ie,A=Ce;return C(),L("div",ke,[R(m,{img:_(t),titleArr:_(a)},null,8,["img","titleArr"]),O("div",Te,[T((C(),se(h,{shadow:"hover",class:"albumPhoto_elCard","infinite-scroll-disabled":_(c)},{default:F(()=>[(C(!0),L(ae,null,re(_(s),(I,K)=>(C(),L("img",{class:"albumPhotoItem_img",src:I,alt:"",key:K},null,8,Ne))),128)),T(O("div",Pe,null,512),[[p,_(i)]]),_(c)?(C(),L("div",Ve,"没有更多啦 ┭┮﹏┭┮")):ie("",!0)]),_:1},8,["infinite-scroll-disabled"])),[[A,v]])])])}}});const Ke=ge(Be,[["__scopeId","data-v-de2ddbe2"]]);export{Ke as default};
