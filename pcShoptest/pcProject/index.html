<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="wrap">
        <!--侧边栏-->
        <div class="toolBar toolOut">
            <!--内容-->
            <div class="toolContent"></div>
            <!--按钮-->
            <div class="toolBtn list"></div>
            <!--菜单-->
            <ul class="toolList">
                <li>
                    <i class="icon"></i>
                    <em>商品会员</em>
                </li>
                <li>
                    <i class="icon"></i>
                    <em>商品会员</em>
                </li>
                <li>
                    <i class="icon"></i>
                    <em>商品会员</em>
                </li>
                <li>
                    <i class="icon"></i>
                    <em>商品会员</em>
                </li>
                <li>
                    <i class="icon"></i>
                    <em>商品会员</em>
                </li>
                <li>
                    <i class="icon"></i>
                    <em>商品会员</em>
                </li>
            </ul>
        </div>
        <!--头部-->
        <div class="header">
            <div class="top">
                <div class="topMain">
                    <!--登录注册-->
                    <div class="login">
                        <p>欢迎来到商品汇!&nbsp;请&nbsp;</p>
                        <p class="loginBtn">
                            <a href="###">登录</a>
                            <a href="###">注册</a>
                        </p>
                    </div>
                    <!--头部导航-->
                    <div class="topNav">
                        <a href="###">我的订单</a>
                        <a href="###">我的购物车</a>
                        <a href="###">我的尚品汇</a>
                        <a href="###">尚品汇会员</a>
                        <a href="###">企业采购</a>
                        <a href="###">关注尚品汇</a>
                        <a href="###">合作招商</a>
                        <a href="###">商家后台</a>
                    </div>
                </div>
            </div>
            <div class="bottom">
                <div class="bottomMain">
                    <!--logo-->
                    <h1 class="logo">
                        <a href="###">
                            <img src="images/Logo.png" alt="">
                        </a>
                    </h1>
                    <!--搜索框-->
                    <div class="search">
                        <input type="text">
                        <button>搜索</button>
                    </div>
                </div>
            </div>
        </div>
        <!--分类导航-->
        <div class="typeNav">
            <div class="typeNavMain">
                <h3>全部商品分类</h3>
                <div>
                    <a href="###">服装城</a>
                    <a href="###">美妆馆</a>
                    <a href="###">尚品汇超市</a>
                    <a href="###">全球购</a>
                    <a href="###">闪购</a>
                    <a href="###">团购</a>
                    <a href="###">有趣</a>
                    <a href="###">秒杀</a>
                </div>
            </div>
        </div>
        <!--商品内容区域-->
        <div class="main">
            <div class="mainCon">
                <!--路径导航-->
                <div class="conPoin">
                    <!--<a href="###">手机、数码、通讯</a>-->
                    <!--<i>/</i>-->
                    <!--<a href="###">手机</a>-->
                    <!--<i>/</i>-->
                    <!--<a href="###">Apple苹果</a>-->
                    <!--<i>/</i>-->
                    <!--<a>iphone 6S系类</a>-->
                </div>
                <!--商品区域-->
                <div class="infoWrap">
                    <!--放大镜区域-->
                    <div class="previwWrap">
                        <!--放大镜-->
                        <div class="previw">
                            <!--小图容器-->
                            <div class="zoomImgBox">
                                <!--小图-->
                                <!--<img src="images/s1.png">-->
                                <!--蒙版mask-->
                            </div>
                            <!--大图容器-->
                        </div>
                        <!--缩略图-->
                        <div class="thumbnail">
                            <a href="javascript:;" class="prev">&lt;</a>
                            <!--图片显示区域-->
                            <div class="itemWrap">
                                <ul>
                                    <!--<li><img src="images/s1.png" alt=""></li>-->
                                    <!--<li><img src="images/s2.png" alt=""></li>-->
                                    <!--<li><img src="images/s3.png" alt=""></li>-->
                                    <!--<li><img src="images/s1.png" alt=""></li>-->
                                    <!--<li><img src="images/s2.png" alt=""></li>-->
                                    <!--<li><img src="images/s3.png" alt=""></li>-->
                                    <!--<li><img src="images/s1.png" alt=""></li>-->
                                    <!--<li><img src="images/s2.png" alt=""></li>-->
                                    <!--<li><img src="images/s3.png" alt=""></li>-->
                                    <!--<li><img src="images/s1.png" alt=""></li>-->
                                    <!--<li><img src="images/s2.png" alt=""></li>-->
                                    <!--<li><img src="images/s3.png" alt=""></li>-->
                                </ul>
                            </div>
                            <a href="javascript:;" class="next">&gt;</a>
                        </div>
                    </div>

                    <!--筛选区域-->
                    <div class="chooseWrap">
                        <!--商品简介-->
                        <div class="infoTop">
                            <!--&lt;!&ndash;商品标题&ndash;&gt;-->
                            <!--<h3>Apple iPhone 6s（A1700）64G玫瑰金色 移动通信电信4G手机bbb123</h3>-->
                            <!--&lt;!&ndash;商品活动&ndash;&gt;-->
                            <!--<p>推荐选择下方[移动优惠购],手机套餐齐搞定,不用换号,每月还有花费返</p>-->
                            <!--&lt;!&ndash;价钱区域&ndash;&gt;-->
                            <!--<div class="priceWrap">-->
                            <!--    <div class="priceTop">-->
                            <!--        <p class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</p>-->
                            <!--        <p class="price">-->
                            <!--            <i>¥</i>-->
                            <!--            <em>5299</em>-->
                            <!--            <span>降价通知</span>-->
                            <!--        </p>-->
                            <!--        <p class="remark">-->
                            <!--            <i>累计评价</i>-->
                            <!--            <span>670000</span>-->
                            <!--        </p>-->
                            <!--    </div>-->
                            <!--    <div class="priceButtom">-->
                            <!--        <p class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>-->
                            <!--        <div>-->
                            <!--            <i>加价购</i>-->
                            <!--            <span>满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换购热销商品</span>-->
                            <!--        </div>-->
                            <!--    </div>-->
                            <!--</div>-->
                            <!--&lt;!&ndash;地址&ndash;&gt;-->
                            <!--<div class="support">-->
                            <!--    <div>-->
                            <!--        <p class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</p>-->
                            <!--        <p class="text">以旧换新，闲置手机回收 4G套餐超值抢 礼品购</p>-->
                            <!--    </div>-->
                            <!--    <div>-->
                            <!--        <p class="title">配&nbsp;送&nbsp;至</p>-->
                            <!--        <p class="text">广东省 深圳市 宝安区</p>-->
                            <!--    </div>-->
                            <!--</div>-->
                        </div>
                        <!--选择区域-->
                        <div class="choose">
                            <!--选择结果-->
                            <div class="choosed">
                                <!--<mark>黑色<a href="javascript:;">X</a></mark>-->
                            </div>
                            <!--选项-->
                            <div class="chooseArea">
                                <!--<dl>-->
                                <!--    <dt>选择颜色</dt>-->
                                <!--    <dd>金色</dd>-->
                                <!--    <dd>银色</dd>-->
                                <!--    <dd>黑色</dd>-->
                                <!--</dl>-->
                                <!--<dl>-->
                                <!--    <dt>内存容量</dt>-->
                                <!--    <dd>16G</dd>-->
                                <!--    <dd>64G</dd>-->
                                <!--    <dd>128G</dd>-->
                                <!--    <dd>256G</dd>-->
                                <!--</dl>-->
                                <!--<dl>-->
                                <!--    <dt>选择版本</dt>-->
                                <!--    <dd>公开版</dd>-->
                                <!--    <dd>移动版</dd>-->
                                <!--</dl>-->
                                <!--<dl>-->
                                <!--    <dt>购买方式</dt>-->
                                <!--    <dd>官方标配</dd>-->
                                <!--    <dd>优惠移动版</dd>-->
                                <!--    <dd>电信优惠版</dd>-->
                                <!--</dl>-->
                            </div>
                            <!--购物车-->
                            <div class="carWrap">
                                <div class="control">
                                    <input type="text">
                                    <a href="javascript:;">+</a>
                                    <a href="javascript:;" class="minus">-</a>
                                </div>
                                <button class="addCar">加入购物车</button>
                            </div>
                        </div>
                    </div>

                </div>
                <!--商品详情区域-->
                <div class="detailWrap">
                    <!--侧边栏-->
                    <aside>
                        <!--按钮区域-->
                        <div class="tabWrap">
                            <h4 class="active">相关分类</h4>
                            <h4>推荐品牌</h4>
                        </div>
                        <!--内容区域-->
                        <div class="tabContent">
                            <div class="active">
                                <ul class="partList">
                                    <li>手机</li>
                                    <li>手机壳</li>
                                    <li>内存卡</li>
                                    <li>iPhone配件</li>
                                    <li>贴膜</li>
                                    <li>手机耳机</li>
                                    <li>移动电源</li>
                                    <li>平板电脑</li>
                                </ul>
                                <div class="goodsList">
                                    <!--一个商品-->
                                    <div class="item">
                                        <div class="partImg">
                                            <img src="images/part01.png" alt="">
                                        </div>
                                        <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                                        <p class="partPrice">¥6088.00</p>
                                        <div class="carBox">
                                            <a href="javascript:;">加入购物车</a>
                                        </div>
                                    </div>
                                    <!--一个商品结束-->
                                    <div class="item">
                                        <div class="partImg">
                                            <img src="images/part01.png" alt="">
                                        </div>
                                        <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                                        <p class="partPrice">¥6088.00</p>
                                        <div class="carBox">
                                            <a href="javascript:;">加入购物车</a>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="partImg">
                                            <img src="images/part01.png" alt="">
                                        </div>
                                        <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                                        <p class="partPrice">¥6088.00</p>
                                        <div class="carBox">
                                            <a href="javascript:;">加入购物车</a>
                                        </div>
                                    </div>
                                    <div class="item">
                                        <div class="partImg">
                                            <img src="images/part01.png" alt="">
                                        </div>
                                        <p class="partName">Apple苹果iPhone 6s (A1699)</p>
                                        <p class="partPrice">¥6088.00</p>
                                        <div class="carBox">
                                            <a href="javascript:;">加入购物车</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>推荐品牌</div>
                        </div>
                    </aside>
                    <!--详情区-->
                    <div class="detail">
                        <!--选择搭配-->
                        <div class="fitting">
                            <h4>选择搭配</h4>
                            <div class="goodSuits">
                                <div class="master">
                                    <img src="images/l-m01.png" alt="">
                                    <p>¥5299</p>
                                    <i>+</i>
                                </div>
                                <div class="suits">
                                    <!--一个商品-->
                                    <div class="item">
                                        <img src="images/dp01.png" alt="">
                                        <p>Feless费勒斯VR</p>
                                        <label>
                                            <input type="checkbox" value="50">
                                            <span>50</span>
                                        </label>
                                    </div>
                                    <!--一个商品结束-->
                                    <div class="item">
                                        <img src="images/dp01.png" alt="">
                                        <p>Feless费勒斯VR</p>
                                        <label>
                                            <input type="checkbox" value="100">
                                            <span>100</span>
                                        </label>
                                    </div>
                                    <div class="item">
                                        <img src="images/dp01.png" alt="">
                                        <p>Feless费勒斯VR</p>
                                        <label>
                                            <input type="checkbox" value="200">
                                            <span>200</span>
                                        </label>
                                    </div>
                                    <div class="item">
                                        <img src="images/dp01.png" alt="">
                                        <p>Feless费勒斯VR</p>
                                        <label>
                                            <input type="checkbox" value="300">
                                            <span>300</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="result">
                                    <div>已购0件商品</div>
                                    <h5>套餐价</h5>
                                    <p>¥5299</p>
                                    <button>加入购物车</button>
                                </div>
                            </div>
                        </div>
                        <!--商品详情-->
                        <div class="intro">
                            <!--选项区-->
                            <ul class="tabWrap">
                                <li class="active"><a href="javascript:;">商品介绍</a></li>
                                <li><a href="javascript:;">规格与包装</a></li>
                                <li><a href="javascript:;">售后保障</a></li>
                                <li><a href="javascript:;">商品评价</a></li>
                                <li><a href="javascript:;">手机社区</a></li>
                            </ul>
                            <!--内容区-->
                            <div class="tabContent">
                                <div class="active">
                                    <ul>
                                        <li>分辨率：1920*1080(FHD)</li>
                                        <li>后置摄像头：1200万像素</li>
                                        <li>前置摄像头：500万像素</li>
                                        <li>核 数：其他</li>
                                        <li>频 率：以官网信息为准</li>
                                        <li>品牌： Apple</li>
                                        <li>商品名称：APPLEiPhone 6s Plus</li>
                                        <li>商品编号：1861098</li>
                                        <li>商品产地：中国大陆</li>
                                        <li>商品毛重：0.51kg</li>
                                        <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                                        <li>系统：苹果（IOS）</li>
                                        <li>像素：1000-1600万品毛重：0.51kg</li>
                                        <li>机身内存：64GB</li>
                                    </ul>
                                    <img src="images/intro01.png" alt="">
                                    <img src="images/intro02.png" alt="">
                                    <img src="images/intro03.png" alt="">
                                </div>
                                <div>规格与包装</div>
                                <div>售后保障</div>
                                <div>商品评价</div>
                                <div>手机社区</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
<script type="text/javascript" src="js/data.js"></script>
<script type="text/javascript">

    window.onload = function (){
        //大图路径索引
        let previwID = 0;

        //调用函数 路径导航
        conPoin();
        //获取data.js数据 并添加到html中
        //功能：动态获取数据来添加样式
        function conPoin(){
            //获取父元素conPoin 以便添加子元素a
            let conPoin = document.querySelector('.wrap .main .mainCon .conPoin');
            //获取data中的path数据
            let path = goodData.path;
            //创建遍历，获取path数组中的各个值
            for (let i =0;i<path.length;i++){
                //创建需要添加的a标签
                let aNode = document.createElement('a');
                //将title内容写入
                aNode.innerHTML = path[i].title;
                //将a放入conPoin中
                conPoin.appendChild(aNode);
                if(i!==path.length-1){
                    //将url内容写入
                    aNode.href = path[i].url;
                    //创建i标签来存储/
                    let iNode = document.createElement('i');
                    iNode.innerHTML = '/';
                    //将i标签放入conPoin
                    conPoin.appendChild(iNode);
                }
            }

        }

        //调用函数 放大镜功能
        previw();
        //放大镜 功能
        function previw(){
            //获取放大镜容器
            let previwNode = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .previw');
            //获取小图容器
            let zoomImgBox = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .previw .zoomImgBox');
            //定义一个变量来判断是否存在蒙版
            let maskNode = null;
            //定义一个大图容器
            let bigImgBox = null;
            //定义一个大图 用来存储大图的
            let bigImg = null;
            //动态获取小图
            //获取数据
            let imglist = goodData.imagessrc;
            let smallImg = document.createElement('img');
            //小图第一张 为默认缩略图第一张
            smallImg.src = imglist[0].s;
            zoomImgBox.appendChild(smallImg);

            //移入事件
            previwNode.addEventListener('mouseenter',function (){
                //判断是否有蒙版
                if(!maskNode){
                    //创建一个div来表示蒙版
                    maskNode = document.createElement('div');
                    //给蒙版添加类名
                    maskNode.className = 'mask';
                    //将创建好的蒙版放入zoomImgBox其中
                    zoomImgBox.appendChild(maskNode);
                    //创建大图容器
                    bigImgBox = document.createElement('div');
                    //给大图添加类名
                    bigImgBox.className = 'bigImgBox';
                    //创建一个img存储大图片
                    bigImg = document.createElement('img');
                    //将图片放入
                    // bigImg.src = 'images/b1.png';
                    bigImg.src = imglist[previwID].b;
                    //将图片放入大图容器中
                    bigImgBox.appendChild(bigImg);
                    //将大图放入previw中
                    previwNode.appendChild(bigImgBox);

                }
            });

            //

            //鼠标在zoomImgBox移动时
            zoomImgBox.addEventListener('mousemove',function (event){
                //兼容低版本浏览器IE
                event = event || window.event;
                //鼠标在蒙版中心
                //当前位置
                //鼠标距离视口左侧的值 - 父容器距离视口左侧的值 - 蒙版元素宽度的一半
                let maskPosition = {
                    left:event.clientX - previwNode.getBoundingClientRect().left - maskNode.offsetWidth/2,
                    top:event.clientY - previwNode.getBoundingClientRect().top - maskNode.offsetHeight/2
                }

                //蒙版边界判断
                if(maskPosition.left < 0 ){
                    maskPosition.left = 0;
                }else if(maskPosition.left > previwNode.clientWidth - maskNode.offsetWidth){
                    maskPosition.left = previwNode.clientWidth - maskNode.offsetWidth;
                }
                if(maskPosition.top < 0){
                    maskPosition.top = 0;
                }else if(maskPosition.top > previwNode.clientHeight - maskNode.offsetHeight){
                    maskPosition.top = previwNode.clientHeight - maskNode.offsetHeight;
                }

                //修改蒙版位置
                maskNode.style.left = maskPosition.left +'px';
                maskNode.style.top = maskPosition.top +'px';

                //计算比例 蒙版可移动空间/大图可移动空间
                let scale = (previwNode.clientWidth - maskNode.offsetWidth) / (bigImg.offsetWidth - bigImgBox.clientWidth);

                let bigPosition ={
                    left:maskPosition.left / scale,
                    top:maskPosition.top /scale
                }
                bigImg.style.left = -bigPosition.left +'px';
                bigImg.style.top = -bigPosition.top +'px';
            });

            //移除事件
            previwNode.addEventListener('mouseleave',function (){
                //删除蒙版和大图
                zoomImgBox.removeChild(maskNode);
                previwNode.removeChild(bigImgBox);
                //重置蒙版和大图容器
                maskNode = null;
                bigImgBox = null;



            });


        }

        //调用函数 缩略图功能
        thumbnail();
        //缩略图切换功能
        function thumbnail(){
            // 获取左按钮元素
            let prevbuttom = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail a.prev');
            // 获取右按钮元素
            let nextbuttom = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail a.next');
            //获取需要移动的ul
            let ulNode = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .itemWrap ul');
            //动态渲染 获取动态数目的li
            //获取数据
            let imglist = goodData.imagessrc;
            //创建img 把获取的数据添加到img中
            imglist.forEach(function (element){
                //创建容器li
                let liCreate = document.createElement('li')
                // 创建容器img
                let imgCreate = document.createElement('img');
                //将数据放入
                imgCreate.src = element.s;
                //将img放入Li
                liCreate.appendChild(imgCreate);
                //将li放入ul
                ulNode.appendChild(liCreate);
            });
            //获取装图片的所有Li
            let liNode = document.querySelectorAll('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .itemWrap ul li');
            //缩略图显示的图片
            let imgShow = 5;
            //移动图片的张数
            let imgMove = 2;
            //图片的marginRight
            let imgMr = 20 ;
            //可移动距离 （图片总张数 - 显示的图片数）*（图片的宽度 + 图片的marginRight）
            let canMove = (liNode.length - imgShow)*(liNode[0].offsetWidth + imgMr);
            //已经移动的距离
            let hadMove = 0;
            //每次移动的距离 （图片的宽度 + 图片的marginRight）*移动图片的张数
            let eachMove = (liNode[0].offsetWidth + imgMr)*imgMove;

            //给右按钮绑定单击事件
            nextbuttom.addEventListener('click',function (){
                //判断能否移动 可移动的距离 - 已经移动的距离 > 每次移动的距离
                if(canMove - hadMove > eachMove) {
                    hadMove += eachMove;
                }
                else{//当剩余距离无法再大于每次移动距离时 走完剩余距离
                    hadMove = canMove;
                }
                //修改移动位置 为已经移动的距离负值
                ulNode.style.left = -hadMove +'px';
            });

            //给左按钮绑定事件
            prevbuttom.addEventListener('click',function (){
                //右侧已经移动的距离 就是左边可移动的距离
                if(hadMove > 0){//左侧还有距离
                    if(hadMove > eachMove){//左侧的距离大于每次移动距离
                        hadMove -=eachMove;
                    }
                    else{//左侧距离小于每次移动距离 回到初始点
                        hadMove = 0;
                    }
                    //修改位置
                    ulNode.style.left = -hadMove +'px';
                }
            });

        }

        //缩略图点击功能
        thumbnailClick();
        function thumbnailClick(){
            //获取数据
            let imglist =goodData.imagessrc;
            //获取li集合
            let items = document.querySelectorAll('.wrap .main .mainCon .infoWrap .previwWrap .thumbnail .itemWrap ul li');
            //获取小图 以便替换
            let smallImg = document.querySelector('.wrap .main .mainCon .infoWrap .previwWrap .previw .zoomImgBox img');

            for(let i = 0;i<items.length;i++){
                // //给每个li绑定index 方便大图操作
                // items[i].index = i;
                //给每个li绑定点击事件
                items[i].addEventListener('click',function (){
                   //获取对应数据的s值
                   let imgSrc = imglist[i].s;
                   //替换小图的src
                    smallImg.src = imgSrc;
                   //将索引给大图
                   previwID = i;
                });
            }

        }

        //商品信息数据渲染
        infoData();
        function infoData(){
            //获取商品简介元素
            let infoTopNode = document.querySelector('.wrap .main .mainCon .infoWrap .chooseWrap .infoTop');
            //获取信息
            let goodsDetail = goodData.goodsDetail;
            //创建变量存储信息
            let str = `
             <h3>${goodsDetail.title}</h3>
             <p>${goodsDetail.recommend}</p>
             <div class="priceWrap">
             <div class="priceTop">
             <p class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</p>
             <p class="price">
             <i>¥</i>
             <em>${goodsDetail.price}</em>
             <span>降价通知</span>
             </p>
             <p class="remark">
             <i>累计评价</i>
             <span>${goodsDetail.evaluateNum}</span>
             </p>
             </div>
             <div class="priceButtom">
             <p class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>
             <div>
             <i>${goodsDetail.promoteSales.type}</i>
             <span>${goodsDetail.promoteSales.content}</span>
             </div>
             </div>
             </div>
             <div class="support">
             <div>
             <p class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</p>
             <p class="text">${goodsDetail.support}</p>
             </div>
             <div>
             <p class="title">配&nbsp;送&nbsp;至</p>
             <p class="text">${goodsDetail.address}</p>
             </div>
             </div>`;
            //将信息插入
            infoTopNode.innerHTML = str;

        }

        //选择区域逻辑 渲染
        chooseArea();
        function chooseArea(){
            //获取数据
            let crumbData = goodData.goodsDetail.crumbData;
            //获取dl的父元素chooseArea 方便存储位置
            let chooseArea = document.querySelector('.wrap .main .mainCon .choose .chooseArea');
            //遍历crumbData数组
            crumbData.forEach(function (item){
                //item代表每个元素对象
                //创建dl 一个dl对应一个item
                let dlNode = document.createElement('dl');
                //创建dt 当前存储title
                let dtNode = document.createElement('dt');
                //将title写入dt
                dtNode.innerHTML = item.title;
                //将dt放入dl中
                dlNode.appendChild(dtNode);

                //遍历每个item中的data数组
                item.data.forEach(function (database){
                    //创建dd 用来存放data中的每个元素
                    let ddNode = document.createElement('dd');
                    //将数据写入dd
                    ddNode.innerHTML = database.type;
                    //给每个选项添加改变价钱的属性
                    ddNode.setAttribute('changePrice',database.changePrice);
                    //将dd插入dl中
                    dlNode.appendChild(ddNode);
                });
                //将dl插入chooseArea中
                chooseArea.appendChild(dlNode);
            });

            //获取dl集合
            let dllist = document.querySelectorAll('.wrap .main .mainCon .choose .chooseArea dl');
            //创建一个数组容器，相当于第几个dl中
            let arr = new Array(dllist.length);
            //将arr数组用0填充
            arr.fill(0);
            //获取choosed元素，以便添加选中的li
            let choosedNode = document.querySelector('.wrap .main .mainCon .choose .choosed');

            //遍历dl集合
            for(let i=0;i<dllist.length;i++){
                //用var标签写会存在作用域问题
                //获取每个dl中的dd 存储到dd集合中
                let ddlist = dllist[i].getElementsByTagName('dd');

                //给每个dd集合中的元素绑定点击事件
                for(let j =0;j<ddlist.length;j++){
                    ddlist[j].addEventListener('click',function (){
                        //清除当前行的样式
                        for(let k=0;k<ddlist.length;k++){
                            ddlist[k].style.color = '#666';
                        }
                        //修改点击事件的样式
                        ddlist[j].style.color = 'red';
                        //存储当前点击的文本在数组中
                        //直接存元素，为了能够使用文本和changePrice
                        arr[i] = ddlist[j];
                        //计算改变价格
                        priceSum(arr);
                        //每一次创建新选择结果之前，都清空一次父元素(父元素为choosed)
                        choosedNode.innerHTML ='';
                        //遍历arr数组，将有内容的元素获取文本 放入mark中
                        arr.forEach(function (element,index){
                            //arr数组内默认为0 如果有值则创建
                            if(element){
                                //创建mark标签
                                let markNode = document.createElement('mark');
                                //将数据写入mark中
                                markNode.innerText = element.innerText;
                                //创建a标签
                                let aNode =document.createElement('a');
                                aNode.href = 'javascript:;';
                                aNode.innerText ='X';
                                //给元素a添加属性num 记录当前所在的dl 方便删除
                                aNode.setAttribute('num',index);
                                //将a放入mark中
                                markNode.appendChild(aNode);
                                //将mark放入choosed中
                                choosedNode.appendChild(markNode);
                            }
                        });
                        //删除功能
                        //获取a标签集合
                        let aList = document.querySelectorAll('.wrap .main .mainCon .choose .choosed mark a');
                        //遍历a
                        for (let m =0;m<aList.length;m++){
                            //给每个a标签绑定事件
                            aList[m].addEventListener('click',function (){
                                //删除mark标签
                                choosedNode.removeChild(aList[m].parentNode);
                                //获取a标签中的Num值 以便清除arr中的值
                                let numA = parseInt(aList[m].getAttribute('num'));
                                //清除arr中对应的值
                                arr[numA] = 0;
                                //计算改变后的价格
                                priceSum(arr);
                                //重置当前dl中dd的高亮 获取当前dl的dd集合
                                let ddlistNow = dllist[numA].getElementsByTagName('dd');
                                //获取当前dl中的dd
                                for (let n=0;n<ddlistNow.length;n++){
                                    ddlistNow[n].style.color = '#666';
                                }
                                //修改默认值
                                ddlistNow[0].style.color = 'red';
                            });
                        }



                    });
                }
            }
            //价钱计算
            function priceSum(arr){
                //获取数据中的原价
                let price = goodData.goodsDetail.price;
                //获取价格元素 以便修改
                let emPrice = document.querySelector('.wrap .main .mainCon .infoWrap .chooseWrap .infoTop .priceWrap .priceTop p.price em');
                //遍历arr数组 计算价格
                arr.forEach(function (element){
                    //element为arr数组中每一个dd
                    //判断是否为空
                    if(element){
                        price += parseInt(element.getAttribute('changePrice'));
                    }
                });
                //修改价格
                emPrice.innerHTML = price;
                //获取选择完套餐的价格元素
                let phonePrice = document.querySelector('.wrap .main .mainCon .detailWrap .detail .fitting .goodSuits > div.master p');
                //获取选框集合
                let choosePrice = document.querySelectorAll('.wrap .main .mainCon .detailWrap .detail .fitting .goodSuits > div.suits .item label input');
                //获取最终修改的价格元素
                let endPrice =document.querySelector('.wrap .main .mainCon .detailWrap .detail .fitting .goodSuits > div.result p');
                //修改随心搭配的价格
                phonePrice.innerHTML = '¥'+price;
                //每次点击都要检查哪些选框被选中了的
                for(let j=0;j<choosePrice.length;j++){
                    if(choosePrice[j].checked){
                        //进入判断表示已选中
                        price += parseInt(choosePrice[j].value);
                    }
                }
                //修改最终价格
                endPrice.innerHTML = '¥'+price;

            }




        }

        //侧边栏tab切换
        //面向对象思想写法
        asideTap();
        //创建构造函数
        function Tap(btnNode,tabContent){
            //this指调用的实例
            this.btnNode = btnNode;
            this.tabContent = tabContent;
            //存储当前的this
            let _this = this;
            //给btnNode绑定事件
            for(let i=0;i<this.btnNode.length;i++){
                //给按钮添加Index属性方便记录
                this.btnNode[i].index = i;
                this.btnNode[i].addEventListener('click',function (){
                    //通过实例调用原型方法
                    _this.btnClick(this);
                });
            }

        }
        //通过原型添加相应功能
        Tap.prototype.btnClick = function (btn){
            //当前的this指调用事件btnClick的this即_this 即实例
            //清除当前点击的所有className
            for(let i=0;i<this.btnNode.length;i++){
                //
                this.btnNode[i].className = '';
                this.tabContent[i].className = '';
            }
            //给当前点击的按钮以及对应的内容区域添加样式
            btn.className = 'active';
            this.tabContent[btn.index].className = 'active';
        };

        //面向对象思想写法
        function  asideTap(){
            //获取需要点击的元素
            let h4Node =document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabWrap h4');
            //获取内容区域
            let tabContent = document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabContent>div');
            //调用构造函数
            new Tap(h4Node,tabContent);
        }

        // 普通写法
        // function asideTap(){
        //     //获取需要点击的元素
        //     let h4Node =document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabWrap h4');
        //     //获取内容区域
        //     let tabContent = document.querySelectorAll('.wrap .main .mainCon .detailWrap aside .tabContent>div');
        //     //给每个h4绑定点击事件
        //     for (let i=0;i<h4Node.length;i++){
        //         //存储索引 方便获取对应的内容区域
        //         h4Node[i].index = i;
        //         //绑定点击事件
        //         h4Node[i].addEventListener('click',function (){
        //             //清除所有h4和内容区域的class名称
        //             for(let j=0;j<h4Node.length;j++){
        //                 //清除h4的class名称
        //                 h4Node[j].className = '';
        //                 //清除内容区域的class名称
        //                 tabContent[j].className = '';
        //             }
        //             //给当前点击的h4添加active的class名称
        //             this.className = 'active';
        //             //给当前的内容区域添加active的class名称
        //             tabContent[this.index].className = 'active';
        //         });
        //     }
        // }

        //函数调用
        introTab();
        //商品详情tab切换
        function introTab(){
            //获取商品详情中所有的按钮li
            let tabWrapLi = document.querySelectorAll('.wrap .main .mainCon .detailWrap .detail .intro .tabWrap li');
            //获取商品详情中的内容元素
            let tabContent = document.querySelectorAll('.wrap .main .mainCon .detailWrap .detail .intro .tabContent > div');
            //通过构造函数完成切换
            new Tap(tabWrapLi,tabContent);
        }

        //选择搭配价格变化
        fitting();
        function fitting(){
            //获取选择完套餐的价格元素
            let phonePrice = document.querySelector('.wrap .main .mainCon .detailWrap .detail .fitting .goodSuits > div.master p');
            //获取选框集合
            let choosePrice = document.querySelectorAll('.wrap .main .mainCon .detailWrap .detail .fitting .goodSuits > div.suits .item label input');
            //获取最终修改的价格元素
            let endPrice =document.querySelector('.wrap .main .mainCon .detailWrap .detail .fitting .goodSuits > div.result p');
            //最终价格
            let price = 0;
            //循环遍历选框集合，添加点击事件
            for(let i=0;i<choosePrice.length;i++){
                //添加点击事件
                choosePrice[i].addEventListener('click',function (){
                    //获取选择完套餐的价格 截取获取的字符串索引1后的部分
                    let pricePacket = parseInt(phonePrice.innerHTML.substr(1));
                    //最终价格 先加上套餐价格
                    price = pricePacket;
                    //每次点击都要检查哪些选框被选中了的
                    for(let j=0;j<choosePrice.length;j++){
                        if(choosePrice[j].checked){
                            //进入判断表示已选中
                            price += parseInt(choosePrice[j].value);
                        }
                    }
                    //修改最终价格
                    endPrice.innerHTML = '¥'+price;
                });
            }
        }

        //侧边栏展开
        toolBar();
        function toolBar(){
            //获取整个侧边栏
            let toolBarNode =document.querySelector('.wrap .toolBar');
            //获取按钮
            let toolBtnNode =document.querySelector('.wrap .toolBar .toolBtn');
            //判断展开状态
            let isNot = false;
            //给按钮绑定点击事件
            toolBtnNode.addEventListener('click',function (){
                if(!isNot){
                    //变为展开
                    toolBarNode.className = 'toolBar toolWrap';
                    //展开的按钮
                    toolBtnNode.className = 'toolBtn cross';
                }
                else{
                    //变为隐藏
                    toolBarNode.className = 'toolBar toolOut';
                    //隐藏的按钮
                    toolBtnNode.className = 'toolBtn list';
                }
                //同时更改判断
                isNot = !isNot;
            });
        }

    };
</script>
</body>
</html>